(function(a){a(".mainmenu > ul > li").hover(function(){var b=a(this).closest("li");a(".mainmenu ul ul").stop().clearQueue().fadeOut("slow",function(){a("ul",b).stop().clearQueue().fadeIn("slow")})},function(){var b=a(this).closest("li");a("ul",b).stop().clearQueue().fadeOut("slow",function(){a(".mainmenu ul li.active ul").clearQueue().stop().fadeIn("slow")})});a(".usermenu .login a").click(function(){var b=a(this).closest(".usermenu");var c=a(".loginform",b);if(c.css("display")=="inline"){c.css("display","none")}else{c.css("display","inline");a('input[name="username"]',c).focus()}return false});a(".usermenu .loginform form").submit(function(){var d=a(this);var c=a('input[name="csrf-token"]',d);var g=a('input[name="username"]',d);var b=a('input[name="password"]',d);var h=a('input[type="submit"]',d);if(g.val()==""||b.val()==""){return false}h.animate({opacity:0},500);var e=d.serialize();e+="&submit=submit";g.attr("disabled","disabled");b.attr("disabled","disabled");var f={url:d.attr("action")+"/json",data:e,type:d.attr("method"),dataType:"json",error:function(k,i,j){h.css("background-image","url(/style/key_delete.png)");g.removeAttr("disabled");b.removeAttr("disabled").val("");h.animate({opacity:1},500,function(){setTimeout(function(){h.css("background-image","url(/style/key_go.png)")},2000)})},success:function(k,i,j){if(k.result=="success"){window.location.href=window.location.href;return}else{h.css("background-image","url(/style/key_delete.png)");g.removeAttr("disabled");b.removeAttr("disabled").val("");h.animate({opacity:1},500,function(){setTimeout(function(){h.css("background-image","url(/style/key_go.png)")},2000)})}}};a.ajax(f);return false});a("aside a.delete").click(function(){var b=confirm(a(this).data("prompt"));if(!b){return false}})})(jQuery);